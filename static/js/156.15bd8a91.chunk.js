"use strict";(self.webpackChunkproject=self.webpackChunkproject||[]).push([[156],{3156:(e,t,s)=>{s.r(t),s.d(t,{default:()=>w});var a=s(7565),r=s(5758),l=s(4730),n=s(8296),i=s(558),c=s(3049),o=s(3967),d=s(2274),x=s(3437),m=s(3163),h=s.n(m),u=s(865),g=s(1694),f=s(7929);const y=[{name:"Newest",sort:"newest",current:!0},{name:"Price: Low to High",sort:"price-asc",current:!1},{name:"Price: High to Low",sort:"price-desc",current:!1}];function p(e){let{searchTerm:t}=e;console.log(t);const[s,c]=(0,a.useState)([]),[x,m]=(0,a.useState)(1),[h,y]=(0,a.useState)([]),[p,w]=(0,a.useState)(!1),[v,k]=(0,a.useState)([]),[C,F]=(0,a.useState)(!1),[P,T]=(0,a.useState)(!1),[S,A]=(0,a.useState)("");(0,a.useEffect)((()=>{(async()=>{try{const e=await(0,r.AS)(t);c(e),y(e),T(0===e.length)}catch(e){console.error("Failed to fetch products:",e)}})()}),[t]),(0,a.useEffect)((()=>{(async()=>{try{const e=await(0,u.QU)();k(e)}catch(e){console.error("Failed to fetch categories:",e)}})()}),[]);const z=(0,a.useMemo)((()=>Math.ceil(h.length/12)),[h.length]),I=(0,a.useMemo)((()=>{const e=12*x,t=e-12;return h.slice(t,e)}),[h,x,12]);return(0,f.jsxs)("div",{className:"bg-white",children:[(0,f.jsx)(n.e,{show:p,children:(0,f.jsxs)(i.lG,{className:"relative z-40 lg:hidden",onClose:w,children:[(0,f.jsx)(n.e.Child,{enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,f.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,f.jsx)(n.e.Child,{enter:"transition ease-in-out duration-300 transform",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:(0,f.jsx)(i.lG.Panel,{className:"fixed inset-0 z-40 flex ml-auto w-full max-w-xs flex-col h-full overflow-y-auto bg-white py-4 pb-12 shadow-xl",children:(0,f.jsxs)("div",{className:"flex items-center justify-between px-4",children:[(0,f.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Filters"}),(0,f.jsxs)("button",{type:"button",className:"-mr-2 flex h-10 w-10 items-center justify-center rounded-md bg-white p-2 text-gray-400",onClick:()=>w(!1),children:[(0,f.jsx)("span",{className:"sr-only",children:"Close menu"}),(0,f.jsx)(o.A,{className:"h-6 w-6","aria-hidden":"true"})]})]})})})]})}),(0,f.jsxs)("main",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-28",children:[(0,f.jsxs)("div",{className:"flex items-baseline justify-between border-b border-gray-200 pb-6 pt-10",children:[(0,f.jsx)("h1",{className:"text-4xl font-bold tracking-tight text-gray-900",children:"Products"}),(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsxs)("div",{className:"flex space-x-4",children:[(0,f.jsx)(j,{categoryId:S,setFilteredProducts:y,setLoadingProducts:F}),(0,f.jsx)(b,{categories:v,onCategorySelect:async e=>{try{F(!0);const t=await(0,r.TQ)(e);y(t),T(0===t.length),A(e||"")}catch(t){console.error("Failed to fetch products for category ".concat(e,":"),t)}finally{F(!1)}},selectedCategory:S})]}),(0,f.jsxs)("button",{type:"button",className:"-m-2 ml-4 p-2 text-gray-400 hover:text-gray-500 sm:ml-6 lg:hidden",onClick:()=>w(!0),children:[(0,f.jsx)("span",{className:"sr-only",children:"Filters"}),(0,f.jsx)(d.A,{className:"h-5 w-5","aria-hidden":"true"})]})]})]}),(0,f.jsxs)("section",{"aria-labelledby":"products-heading",className:"pt-6 pb-24",children:[(0,f.jsx)("h2",{id:"products-heading",className:"sr-only",children:"Products"}),P&&(0,f.jsx)("div",{className:"grid h-80 place-content-center bg-white px-4",children:(0,f.jsx)("h1",{className:"uppercase tracking-widest text-gray-500",children:"No product found"})}),(0,f.jsx)("div",{className:"lg:col-span-3",children:(0,f.jsx)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:C?(0,f.jsx)("div",{className:"lg:col-span-4",children:(0,f.jsx)(g.A,{})}):I.map((e=>(0,f.jsx)(l.A,{product:e},e._id)))})}),(0,f.jsx)(N,{totalPages:z,currentPage:x,paginate:e=>m(e)})]})]})]})}function j(e){let{categoryId:t,setFilteredProducts:s,setLoadingProducts:a}=e;return(0,f.jsxs)(c.W1,{as:"div",className:"relative inline-block text-left",children:[(0,f.jsxs)(c.IU,{className:"group inline-flex justify-center text-sm font-medium text-gray-700 hover:text-gray-900",children:["Sort",(0,f.jsx)(x.A,{className:"-mr-1 ml-1 h-5 w-5 flex-shrink-0 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"})]}),(0,f.jsx)(n.e,{enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,f.jsx)(c.c,{className:"absolute right-0 z-10 mt-2 w-40 origin-top-right rounded-md bg-white shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,f.jsx)("div",{className:"py-1",children:y.map((e=>(0,f.jsx)(c.Dr,{children:l=>{let{active:n}=l;return(0,f.jsx)("button",{onClick:()=>(async e=>{try{a(!0);const l=await(0,r.TQ)(t,e);s(l)}catch(l){console.error("Failed to fetch products with sort ".concat(e,":"),l)}finally{a(!1)}})(e.sort),className:h()(e.current?"font-medium text-gray-900":"text-gray-500",n?"bg-gray-100":"","block px-4 py-2 text-sm w-full text-left"),children:e.name})}},e.sort)))})})})]})}function b(e){let{categories:t,onCategorySelect:s,selectedCategory:a}=e;return(0,f.jsxs)(c.W1,{as:"div",className:"relative inline-block text-left",children:[(0,f.jsxs)(c.IU,{className:"group inline-flex justify-center text-sm font-medium text-gray-700 hover:text-gray-900",children:["Categories",(0,f.jsx)(x.A,{className:"-mr-1 ml-1 h-5 w-5 flex-shrink-0 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"})]}),(0,f.jsx)(n.e,{enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,f.jsx)(c.c,{className:"absolute right-0 z-10 mt-2 w-40 origin-top-right rounded-md bg-white shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,f.jsx)("div",{className:"py-1",children:t.map((e=>(0,f.jsx)(c.Dr,{children:t=>{let{active:r}=t;return(0,f.jsx)("button",{onClick:()=>s(e._id),className:h()("flex items-center justify-between",r||a===e._id?"bg-gray-100":"","block px-4 py-2 text-sm w-full text-left"),children:e.name})}},e._id)))})})})]})}function N(e){let{totalPages:t,currentPage:s,paginate:a}=e;return(0,f.jsx)("div",{className:"flex justify-center mt-6",children:(0,f.jsx)("nav",{className:"block",children:(0,f.jsx)("ul",{className:"flex pl-0 list-none flex-wrap rounded",children:Array.from({length:t},((e,t)=>(0,f.jsx)("li",{className:"first:ml-0 text-xs font-semibold flex items-center",children:(0,f.jsx)("button",{onClick:()=>a(t+1),className:h()("flex items-center justify-center w-8 h-8 border border-gray-300 rounded-full mx-1",s===t+1?"bg-indigo-500 text-white":"bg-white text-gray-500"),children:t+1})},t)))})})})}const w=e=>{let{searchTerm:t}=e;return(0,f.jsx)("div",{children:(0,f.jsx)(p,{searchTerm:t})})}}}]);
//# sourceMappingURL=156.15bd8a91.chunk.js.map